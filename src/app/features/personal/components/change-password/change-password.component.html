<div class="max-w-xl mx-auto space-y-6">
  <!-- Header -->
  <div>
    <h1 class="text-2xl font-bold text-foreground">Change Password</h1>
    <p class="text-muted-foreground">Update your account password</p>
  </div>

  <z-card>
    <div zCardHeader>
      <h3 zCardTitle class="flex items-center gap-2">
        <z-icon zType="lock" class="h-5 w-5" />
        Password Settings
      </h3>
      <p zCardDescription>
        Choose a strong password that you don't use for other accounts
      </p>
    </div>
    <div zCardContent class="space-y-6">
      <!-- Current Password -->
      <div class="space-y-2">
        <label class="text-sm font-medium">Current Password</label>
        <div class="relative">
          <input z-input
            [type]="showCurrentPassword() ? 'text' : 'password'"
            [(ngModel)]="currentPassword"
            placeholder="Enter your current password"
            class="pr-10">
          <button
            type="button"
            class="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
            (click)="toggleCurrentPassword()">
            <z-icon [zType]="showCurrentPassword() ? 'eye-off' : 'eye'" class="h-4 w-4" />
          </button>
        </div>
      </div>

      <!-- New Password -->
      <div class="space-y-2">
        <label class="text-sm font-medium">New Password</label>
        <div class="relative">
          <input z-input
            [type]="showNewPassword() ? 'text' : 'password'"
            [(ngModel)]="newPassword"
            (ngModelChange)="onNewPasswordChange()"
            placeholder="Enter your new password"
            class="pr-10">
          <button
            type="button"
            class="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
            (click)="toggleNewPassword()">
            <z-icon [zType]="showNewPassword() ? 'eye-off' : 'eye'" class="h-4 w-4" />
          </button>
        </div>

        <!-- Password Strength Indicator -->
        @if (newPassword.length > 0) {
          <div class="space-y-2">
            <div class="flex items-center gap-2">
              <div class="flex-1 h-2 bg-muted rounded-full overflow-hidden">
                <div
                  class="h-full transition-all duration-300 rounded-full"
                  [ngClass]="passwordStrength().color"
                  [style.width.%]="(passwordStrength().score / 6) * 100">
                </div>
              </div>
              <span class="text-sm font-medium" [ngClass]="{
                'text-red-500': passwordStrength().label === 'Weak',
                'text-yellow-500': passwordStrength().label === 'Fair',
                'text-blue-500': passwordStrength().label === 'Good',
                'text-green-500': passwordStrength().label === 'Strong'
              }">
                {{ passwordStrength().label }}
              </span>
            </div>
          </div>
        }
      </div>

      <!-- Password Requirements -->
      <div class="space-y-2">
        <p class="text-sm font-medium text-muted-foreground">Password requirements:</p>
        <ul class="space-y-1">
          @for (req of requirements; track req.label; let i = $index) {
            <li class="flex items-center gap-2 text-sm">
              @if (isRequirementMet(i)) {
                <z-icon zType="check-circle" class="h-4 w-4 text-green-500" />
                <span class="text-green-600 dark:text-green-400">{{ req.label }}</span>
              } @else {
                <z-icon zType="circle" class="h-4 w-4 text-muted-foreground" />
                <span class="text-muted-foreground">{{ req.label }}</span>
              }
            </li>
          }
        </ul>
      </div>

      <!-- Confirm Password -->
      <div class="space-y-2">
        <label class="text-sm font-medium">Confirm New Password</label>
        <div class="relative">
          <input z-input
            [type]="showConfirmPassword() ? 'text' : 'password'"
            [(ngModel)]="confirmPassword"
            placeholder="Confirm your new password"
            class="pr-10">
          <button
            type="button"
            class="absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground"
            (click)="toggleConfirmPassword()">
            <z-icon [zType]="showConfirmPassword() ? 'eye-off' : 'eye'" class="h-4 w-4" />
          </button>
        </div>
        @if (!passwordsMatch()) {
          <p class="text-sm text-red-500 flex items-center gap-1">
            <z-icon zType="alert-circle" class="h-4 w-4" />
            Passwords do not match
          </p>
        }
      </div>
    </div>
    <div zCardFooter class="flex justify-end gap-2">
      <button z-button
        (click)="changePassword()"
        [disabled]="!isFormValid() || saving()">
        @if (saving()) {
          <z-icon zType="loader-2" class="mr-2 h-4 w-4 animate-spin" />
          Changing Password...
        } @else {
          <z-icon zType="key" class="mr-2 h-4 w-4" />
          Change Password
        }
      </button>
    </div>
  </z-card>

  <!-- Security Tips -->
  <z-card>
    <div zCardHeader>
      <h3 zCardTitle class="flex items-center gap-2">
        <z-icon zType="shield" class="h-5 w-5" />
        Security Tips
      </h3>
    </div>
    <div zCardContent>
      <ul class="space-y-2 text-sm text-muted-foreground">
        <li class="flex items-start gap-2">
          <z-icon zType="check" class="h-4 w-4 mt-0.5 text-green-500" />
          <span>Use a unique password that you don't use for other accounts</span>
        </li>
        <li class="flex items-start gap-2">
          <z-icon zType="check" class="h-4 w-4 mt-0.5 text-green-500" />
          <span>Avoid using personal information like birthdays or names</span>
        </li>
        <li class="flex items-start gap-2">
          <z-icon zType="check" class="h-4 w-4 mt-0.5 text-green-500" />
          <span>Consider using a password manager to generate and store strong passwords</span>
        </li>
        <li class="flex items-start gap-2">
          <z-icon zType="check" class="h-4 w-4 mt-0.5 text-green-500" />
          <span>Never share your password with anyone</span>
        </li>
      </ul>
    </div>
  </z-card>
</div>
